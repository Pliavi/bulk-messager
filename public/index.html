<div>Você vai enviar uma mensagem pra 55012996365912</div>

<div id="qrcode"></div>

<button onclick="send()">Enviar</button>

<script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
<script>
  const socket = new WebSocket("ws://localhost:3000");

  socket.addEventListener("open", (event) => {
    console.log("Connection established");
  });

  socket.addEventListener("message", (wsevent) => {
    const event = JSON.parse(wsevent.data);

    if (event.type === "success") {
      console.log("Message sent!");
      return;
    }

    if (event.type === "connected") {
      console.log("Ready to send!");
      return;
    }

    if (event.type === "qrcode") {
      new QRCode(document.getElementById("qrcode"), {
        text: event.data,
        width: 300,
        height: 300,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.L,
      });
      return;
    }

    console.log(event);
  });

  function send() {
    socket.send(
      JSON.stringify({
        type: "SEND_BULK",
        data: {
          to: ["55012996365912", "5512991944059"],
          message: "Hello from Baileys! é nóis que voa, bruxão!",
        },
      })
    );
  }
</script>
